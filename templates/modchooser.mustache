{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template core/chooser

    Chooser.

    Example context (json):
    {
        "title": "Chooser title",
        "method": "post",
        "actionurl": "http://example.org/test",
        "instructions": "Choose one:",
        "paramname": "param",
        "sections": [{
            "id": "section-1",
            "label": "Section one",
            "items": [{
                "label": "item one",
                "description": "description one"
            }]
        }]
    }
}}
<div class="modal-header">
  <h5 class="modal-title" id="modaltitle">
    <span>{{modaltitle}}</span>
    {{#addnewindicator}}
      <input id = "indicatornamedit" data-handler = "indicatornamedit" class = "" value = "{{indicatorname}}">
    {{/addnewindicator}}
    {{^addnewindicator}}
      <span id = "indicatorname">
        <span><b class = "srcname">{{indicatorname}}</b></span>
        <span class="quickediticon" id = "toggleinplaceditable">{{#pix}}t/editstring,core,{{{edithint}}}{{/pix}}</span>
      </span>
      <input id = "indicatornamedit" data-handler = "indicatornamedit" class = "d-none" value = "{{indicatorname}}">
    {{/addnewindicator}}
  </h5>
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">

  <div id="chooseform">
      <form action="{{actionurl}}" id="indchooserform" method="{{method}}" data-indicatorid ="{{indicatorid}}">
          <!-- <div id="typeformdiv">
              {{#params}}
                  <input type="hidden" id="{{id}}" name="{{name}}" value="{{value}}">
              {{/params}}
              <input type="hidden" name="sesskey" value="{{sesskey}}">
          </div> -->

          <div class="options">
              <!-- <div class="instruction">
                  {{instructions}}
              </div> -->
              <div class="alloptions">
                  {{#sections}}
                      <div class="moduletypetitle">
                          <label for="item_{{id}}">
                              <span class="typename">{{label}}</span>
                          </label>
                      </div>
                      {{#items}}
                        <div class="option position-relative pl-4 mb-3">
                          <input class = "custom-control-input" type="checkbox" name="{{paramname}}" id = "ind_{{id}}" data-type="{{id}}" value="{{value}}" {{#checked}}checked{{/checked}}>
                          <label class = "custom-control-label" for="ind_{{id}}">
                              {{#icon}}
                                <image class = "iconlarge activityicon" src="{{src}}" alt="{{alt}}" aria-hidden="true" role="presentation">
                              {{/icon}}
                              <span class="typename">{{label}}</span>
                          </label>
                        </div>
                      {{/items}}
                  {{/sections}}
              </div>
          </div>

      </form>
  </div>

</div>
<div class="modal-footer">
  <button
      type="button"
      class="btn btn-primary"
      data-dismiss="modal"
      {{#addnewindicator}}data-handler = "addIndicator">{{#str}} addnewindicator, format_mytopcoll {{/str}}{{/addnewindicator}}
      {{^addnewindicator}}data-handler = "setEditIndicator">{{#str}} ok, format_mytopcoll {{/str}}{{/addnewindicator}}
  </button>
  <button type="button" class="btn btn-secondary" data-dismiss="modal">{{#str}} close, format_mytopcoll {{/str}}</button>
</div>
{{#js}}
$('#toggleinplaceditable').click(function(e){
    $('#indicatornamedit').removeClass('d-none').focus();
    $('#indicatorname').addClass('d-none');
});
{{/js}}
